# =============================================================================
# GLOBAL SETTINGS
# =============================================================================
global:
  nameOverride: "" # "my-app"
  fullnameOverride: "" # "my-app-fullname"
  commonLabels: {}
  # environment: production
  # team: backend
  commonAnnotations: {}
  # project.io/id: "123"
  imagePullSecrets: []
  # - name: regcred

# =============================================================================
# MAIN WORKLOAD (App Controller)
# =============================================================================
workload:
  kind: Deployment # Deployment or StatefulSet
  replicaCount: 1
  revisionHistoryLimit: 3

  image:
    repository: nginx
    pullPolicy: IfNotPresent
    tag: "" # "1.2.3"

  # Environment
  env: []
  # - name: ENV_VAR
  #   value: "value"
  extraEnvVars: {}
  # DB_HOST: "localhost"
  extraRefEnvVars: {}
  # DB_PASSWORD:
  #   secretName: my-secret
  #   key: password

  # Container Config
  workingDir: "" # "/app"
  command: [] # ["/bin/sh"]
  args: [] # ["-c", "echo hello"]
  lifecycle: {}
  # preStop:
  #   exec:
  #     command: ["/bin/sh", "-c", "sleep 10"]
  resources: {}
  # requests:
  #   cpu: 100m
  #   memory: 128Mi
  # limits:
  #   cpu: 200m
  #   memory: 256Mi

  # Security
  podSecurityContext: {}
  # fsGroup: 2000
  securityContext: {}
  # runAsUser: 1000
  # readOnlyRootFilesystem: true

  # Probes
  probes:
    startup:
      enabled: false
      httpGet:
        path: /
        port: http
      failureThreshold: 30
      periodSeconds: 10
    liveness:
      enabled: false
      httpGet:
        path: /
        port: http
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readiness:
      enabled: false
      httpGet:
        path: /
        port: http
      initialDelaySeconds: 15
      periodSeconds: 10
      timeoutSeconds: 5
      successThreshold: 1
      failureThreshold: 3

  # Scheduling & Networking
  nodeSelector: {}
  # disktype: ssd
  tolerations: []
  # - key: "key"
  #   operator: "Equal"
  #   value: "value"
  #   effect: "NoSchedule"
  affinity: {}
  # podAntiAffinity:
  #   preferredDuringSchedulingIgnoredDuringExecution:
  #   - weight: 100
  #     podAffinityTerm:
  #       labelSelector:
  #         matchExpressions:
  #         - key: app
  #           operator: In
  #           values:
  #           - my-app
  #       topologyKey: kubernetes.io/hostname
  priorityClassName: "" # "high-priority"
  schedulerName: "" # "my-scheduler"
  hostAliases: []
  # - ip: "127.0.0.1"
  #   hostnames:
  #   - "foo.local"
  dnsPolicy: ClusterFirst
  dnsConfig: {}
  # nameservers:
  #   - 1.2.3.4
  # searches:
  #   - ns1.svc.cluster-domain.example
  # options:
  #   - name: ndots
  #     value: "2"

  # Additional Containers
  initContainers: []
  # - name: init-myservice
  #   image: busybox
  #   command: ['sh', '-c', 'echo The app is running! && sleep 3600']
  extraContainers: []
  # - name: sidecar
  #   image: sidecar:1.0
  containerPorts: {}
  # http: 8080
  # metrics: 9090

  # Type Specific Attributes
  deployment:
    annotations: {}
    # meta.helm.sh/release-name: "my-release"
  statefulset:
    annotations: {}
    # meta.helm.sh/release-name: "my-release"
  updateStrategy:
    type: RollingUpdate
  terminationGracePeriodSeconds: 30
  podAnnotations: {}

# =============================================================================
# COMPONENTS
# =============================================================================

service:
  enabled: true
  type: ClusterIP
  port: 80
  targetPort: http
  protocol: TCP
  name: http

  # Advanced
  ports: []
  # - name: https
  #   port: 443
  #   targetPort: 8443
  #   protocol: TCP
  annotations: {}
  # service.beta.kubernetes.io/aws-load-balancer-type: nlb
  headless: false
  clusterIP: "" # "None" or specific IP
  externalTrafficPolicy: Cluster

ingress:
  enabled: false
  className: nginx
  annotations: {}
  # kubernetes.io/ingress.class: nginx
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: Prefix
  extraHosts: []
  # - host: chart-example.org
  #   paths:
  #     - path: /
  #       pathType: ImplementationSpecific
  extraPaths: []
  # - path: /admin
  #   pathType: Prefix
  #   backend:
  #     service:
  #       name: ssl-redirect
  #       port:
  #         name: use-annotation
  extraTls: []
  # - hosts:
  #     - chart-example.org
  #   secretName: chart-example-tls-extra
  tls:
    enabled: false
    secretName: ""

ingressInternal:
  enabled: false
  className: nginx-internal
  annotations: {}
  hosts:
    - host: chart-example-internal.local
      paths:
        - path: /
          pathType: Prefix
  extraHosts: []
  extraPaths: []
  extraTls: []
  tls:
    enabled: true
    secretName: ""

gateway:
  enabled: false
  routes:
    web:
      enabled: false
      kind: HTTPRoute
      matches:
        - path:
            type: PathPrefix
            value: /
    api:
      enabled: false
      kind: GRPCRoute
      backendPort: 50051

serviceAccount:
  create: true
  annotations: {}
  # eks.amazonaws.com/role-arn: arn:aws:iam::123456789012:role/my-role
  name: "" # "my-service-account"

cronjob:
  enabled: true
  jobs: []
  # - name: "hello-world"
  #   schedule: "*/5 * * * *"
  #   command: ["/bin/sh", "-c", "echo hello"]

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80

pdb:
  enabled: false
  minAvailable: 1

networkPolicy:
  enabled: false
  podSelector: {}
  policyTypes: ["Ingress"]
  ingress: []
  egress: []

persistence:
  enabled: false
  storageClass: "oci-bv-retain"
  accessModes: ["ReadWriteOnce"]
  size: 50Gi
  claims: []
  # - name: data
  #   size: 10Gi
  #   accessModes: [ReadWriteOnce]
  #   storageClass: oci-bv
  name: "" # "my-pvc" if using single claim
  mountPath: "/data"
  existingClaim: "" # "my-existing-pvc"
  # For StatefulSet
  volumeClaimTemplates:
    - metadata:
        name: data
      spec:
        accessModes: ["ReadWriteOnce"]
        resources:
          requests:
            storage: 50Gi
  # Extras
  volumes: []
  # - name: foo
  #   secret:
  #     secretName: mysecret
  #     optional: false
  volumeMounts: []
  # - name: foo
  #   mountPath: "/etc/foo"
  #   readOnly: true
  extraVolumes: []
  extraVolumeMounts: []

# =============================================================================
# CONFIGURATION
# =============================================================================
config:
  configFilesPath: "files"
  extraConfigMaps: []
  # - name: my-config
  #   data:
  #     key: value
  extraSecrets: []
  # - name: my-secret
  #   stringData:
  #     key: value
  extraEnvFromConfigMap: []
  # - my-config-map
  extraEnvFromSecret: []
  # - my-secret

  sealedSecrets:
    enabled: false

  externalSecret:
    enabled: false
    secretStoreRef:
      name: "" # "my-secret-store"
      kind: SecretStore
    target:
      creationPolicy: Owner
    refreshInterval: "1h"
    data: []
    # - secretKey: "key-in-k8s"
    #   remoteRef:
    #     key: "key-in-provider"
    dataFrom: []
    # - key: "all-keys-in-provider"

  secretStore:
    enabled: false
    vaultOCID: "ocid1.vault.oc1.ap-singapore-1.gzukg55taadhm.abzwsljrmaynvkdw6342szaoep3hkq6wkbwjg3cdkrflxeusqxgg6fjdbcra"
    region: "ap-singapore-1"
    principalType: "UserPrincipal"
    user: ""
    tenancy: ""
    privateKey: ""
    fingerprint: ""

# =============================================================================
# OBSERVABILITY (Subchart)
# =============================================================================
observability:
  enabled: false
  serviceMonitor:
    enabled: false
    interval: 30s
    scrapeTimeout: 10s
    path: /metrics
    port: http
    additionalLabels: {}
    # release: prometheus
  prometheusRules:
    enabled: false
    additionalLabels: {}
    # role: alert-rules
    groups: []
    # - name: my-rules
    #   rules:
    #   - alert: MyAlert
    #     expr: up == 0
    #     for: 5m
  openTelemetry:
    enabled: false
    mode: deployment
    config: |
      receivers:
        otlp:
          protocols:
            grpc:
            http:
      exporters:
        otlphttp:
          endpoint: "http://tempo.grafana-lgtm.cluster.local:4318"
      service:
        pipelines:
          traces:
            receivers: [otlp]
            exporters: [otlphttp]
    instrumentation:
      enabled: false
      sampler:
        type: parentbased_traceidratio
        argument: "1"
      language: java

# =============================================================================
# EXTRAS
# =============================================================================

extraObjects: []
# - apiVersion: v1
#   kind: Pod
#   metadata:
#     name: my-pod
#   spec:
#     containers:
#     - name: my-container
#       image: nginx
extraLabels: {}
# team: ops
