# Default values for helm-primedb.
# This template organizes parameters into logical functional groups.

# =============================================================================
# 1. GLOBAL & APPLICATION CORE
# =============================================================================
# kind can be: Deployment or StatefulSet
kind: Deployment
replicaCount: 1

nameOverride: ""
fullnameOverride: ""

imagePullSecrets: []
revisionHistoryLimit: 3

statefulset:
  annotations: {}

image:
  repository: nginx
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

workingDir: ""
command: []
args: []

env: []
  # - name: VAR_NAME
  #   value: "value"

envFrom: []
  # - configMapRef:
  #     name: specialized-config-map
  # - secretRef:
  #     name: specialized-secret

resources: {}
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

startupProbe:
  enabled: false
  httpGet:
    path: /
    port: http
  failureThreshold: 30
  periodSeconds: 10

livenessProbe:
  enabled: true
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  enabled: true
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 15
  periodSeconds: 10
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 3

updateStrategy: {}
  # type: RollingUpdate
  # rollingUpdate:
  #   maxUnavailable: 25%
  #   maxSurge: 25%

terminationGracePeriodSeconds: 30

lifecycle: {}
  # postStart:
  #   exec:
  #     command: ["/bin/sh", "-c", "echo Hello from the postStart handler > /usr/share/message"]
  # preStop:
  #   exec:
  #     command: ["/bin/sh", "-c", "nginx -s quit; while killall -0 nginx; do sleep 1; done"]

# =============================================================================
# 2. CONFIGURATION & EXTERNAL SECRETS
# =============================================================================
configMaps:
  enabled: true
  filesDir: files

secretStore:
  enabled: false
  provider: {}
  # oracle:
  #   region: us-ashburn-1
  #   vault: ocid1.vault.oc1.iad.aaaaaa...
  #   # --- Choice 1: Instance Principal ---
  #   # auth:
  #   #   secretRef:
  #   #     principalRef:
  #   #       name: oci-principal
  #
  #   # --- Choice 2: User Principal ---
  #   # user: ocid1.user.oc1..aaaaaa...
  #   # tenancy: ocid1.tenancy.oc1..aaaaaa...
  #   # auth:
  #   #   secretRef:
  #   #     privatekey:
  #   #       name: oracle-secret
  #   #       key: privateKey
  #   #     fingerprint:
  #   #       name: oracle-secret
  #   #       key: fingerprint

externalSecret:
  enabled: false
  secretStoreRef:
    name: ""
    kind: SecretStore
  target:
    # name: my-app-secret
    creationPolicy: Owner
  refreshInterval: "1h"
  data: []
  # - secretKey: username
  #   remoteRef:
  #     key: database-creds
  #     property: username
  dataFrom: []
  # - extract:
  #     key: all-database-creds

# =============================================================================
# 3. NETWORKING & TRAFFIC MANAGEMENT
# =============================================================================
service:
  type: ClusterIP
  port: 80
  targetPort: http
  protocol: TCP
  name: http

ingress:
  enabled: true
  className: nginx
  annotations: {}

  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: Prefix
  extraHosts: []
  extraPaths: []
  extraTls: []
  tls:
    enabled: true
    secretName: ""
    # reflectsFrom: "namespace/secret"

ingressInternal:
  enabled: false
  className: nginx-internal
  annotations: {}
  hosts:
    - host: chart-example-internal.local
      paths:
        - path: /
          pathType: Prefix
  extraHosts: []
  extraPaths: []
  extraTls: []
  tls:
    enabled: true
    secretName: ""

gateway:
  enabled: false
  gatewayClass:
    enabled: false
    controllerName: "example.com/gateway-controller"
  gatewayClassName: ""
  listeners:
    - name: http
      port: 80
      protocol: HTTP
      allowedRoutes:
        namespaces:
          from: Same
  parentRefs: []
  hostnames: []
  rules: []

hostAliases: []
# - ip: "127.0.0.1"
#   hostnames:
#   - "foo.local"

dnsPolicy: ClusterFirst
dnsConfig: {}

# =============================================================================
# 4. PERSISTENCE & STORAGE
# =============================================================================
persistence:
  enabled: false
  # storageClass: "oci-fss"
  # accessModes: ["ReadWriteMany"]
  # size: 10Gi
  # annotations:
  #   nfs.oci.oraclecloud.com/mount-target: <mount-target-ip>
  claims: []
  # - name: data
  #   accessModes: ["ReadWriteOnce"]
  #   size: 10Gi
  #   storageClass: "-"

storageClasses: []
# - name: custom-oci-bv
#   enabled: true
#   default:true
#   allowVolumeExpansion: true
#   provisioner: oci.oraclecloud.com/blockvolume
#   reclaimPolicy: Retain
#   volumeBindingMode: WaitForFirstConsumer
#   parameters:
#     type: balanced

# - name: oci-fss
#   enabled: true
#   default: false
#   provisioner: fss.csi.oraclecloud.com
#   reclaimPolicy: Retain
#   volumeBindingMode: Immediate
#   allowVolumeExpansion: true
#   parameters:
#     availabilityDomain: AD-1
#     mountTargetOcid: ocid1.mounttarget.oc1.sa-saopaulo-1.xxxxx

volumeClaimTemplates: []
# - metadata:
#     name: data
#   spec:
#     accessModes: [ "ReadWriteOnce" ]
#     resources:
#       requests:
#         storage: 1Gi

# Additional volumes/mounts on the output definition.
volumes: []
volumeMounts: []

# =============================================================================
# 5. OBSERVABILITY
# =============================================================================
monitoring:
  serviceMonitor:
    enabled: false
    interval: 30s
    scrapeTimeout: 10s
    path: /metrics
    port: http
    additionalLabels: {}
  prometheusRules:
    enabled: false
    additionalLabels: {}
    groups: []

openTelemetry:
  enabled: false
  mode: deployment
  config: |
    receivers:
      otlp:
        protocols:
          grpc:
          http:
    exporters:
      otlphttp:
        endpoint: "http://tempo.svc.cluster.local:4318"
    service:
      pipelines:
        traces:
          receivers: [otlp]
          exporters: [otlphttp]

  instrumentation:
    enabled: false
    sampler:
      type: parentbased_traceid
      argument: "1"
    language: java # java, python, dotnet, nodejs

# =============================================================================
# 6. SECURITY & RBAC
# =============================================================================
serviceAccount:
  create: true
  annotations: {}
  name: ""

networkPolicy:
  enabled: false
  podSelector: {}
  policyTypes: ["Ingress"]
  ingress: []
  egress: []

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # runAsUser: 1000
  # runAsNonRoot: true

# =============================================================================
# 7. SCHEDULING & SCALING
# =============================================================================
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80

pdb:
  enabled: false
  minAvailable: 1

nodeSelector: {}
tolerations: []
affinity: {}

priorityClassName: ""
schedulerName: ""

# =============================================================================
# 8. HOOKS, CRONS & ADVANCED
# =============================================================================
cronJobs: []
extraObjects: []

# Labels/Annotations
extraLabels: {}
podAnnotations: {}
commonAnnotations: {}
deployment:
  annotations: {}
